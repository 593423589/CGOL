{"remainingRequest":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\src\\components\\hall.vue?vue&type=style&index=0&id=614f786e&scoped=true&lang=stylus&","dependencies":[{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\src\\components\\hall.vue","mtime":1569906559736},{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\stylus-loader\\index.js","mtime":1519606876000},{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#hall\n    .main\n        .users\n            position relative\n            top 24vw\n            height 18vw\n            z-index 10\n\n            .user\n                height 18vw\n                width 100%\n                border-bottom #c6c6c6 solid 1px\n\n                &.woman\n                    background: #ff709d22\n\n                &.man\n                    background: #3ec8ff 22\n\n            /* Safari 5.1 - 6.0 */\n\n            .noOne\n                font-size 4.5vw\n                color #E6A23C\n                line-height 18vw\n\n            .avatar\n                position absolute\n                top 3vw\n                left 6vw\n                height 10vw\n                width 10vw\n                border-radius 50%\n\n            .name\n                position absolute\n                top 7.5vw\n                left 22vw\n                font-size 3.6vw\n                color #f0f0f0\n\n            .sex\n                position absolute\n                top 12vw\n                left 15vw\n                font-size 3vw\n                font-weight bold\n\n            .btn\n                position absolute\n                top 1vw\n                right 3vw\n\n                .el-button\n                    margin 0\n                    margin-right 3px\n                    height 16vw\n                    width 18vw\n                    background #0000\n                    border: 0\n                    outline 0\n                    color #f0f0f0\n                    font-size 6vw\n\n        .chatBtn\n            position fixed\n            z-index 10\n            bottom 8em\n            right 1em\n            opacity 0.6\n            background #0000\n\n            .el-button\n                font-size 4vw\n\n    .MessageInput\n        position fixed\n        left 0\n        bottom 0\n        z-index 20\n        width 100%\n        height 154vw\n        background: -webkit-linear-gradient(left top, #0e1531, #16310a); /* Safari 5.1 - 6.0 */\n        background: -o-linear-gradient(bottom right, #0e1531, #16310a); /* Opera 11.1 - 12.0 */\n        background: -moz-linear-gradient(bottom right, #0e1531, #16310a); /* Firefox 3.6 - 15 */\n        background: linear-gradient(to bottom right, #0e1531, #16310a); /* 标准的语法 */\n\n        .input\n            position absolute\n            bottom 0\n            width 100%\n            height 10vw\n\n        .privateAvatar\n            height 145vw\n            -webkit-filter: brightness(50%) blur(5px); /* Chrome, Safari, Opera */\n            filter: brightness(50%) blur(5px);\n\n        .messages\n            position absolute\n            z-index 0\n            overflow: hidden;\n            bottom 16vw\n            top 10vw\n            height 135vw\n            width 100%\n\n            .content\n                margin-top 6vw\n                margin-bottom 4vw\n                height 16vw\n                width 100%\n                line-height 16vw\n                font-size 4.5vw\n                color #152e31\n\n                .name\n                    position relative\n                    color #fff\n                    left 8vw\n                    top -3vw\n                    font-size 4vw\n                    overflow hidden\n\n                .avatar\n                    position absolute\n                    left 2vw\n                    top 2vw\n                    height 12vw\n                    width 12vw\n                    border-radius 50%\n\n                .chatBackground\n                    position absolute\n                    z-index -10\n                    left 22vw\n                    top 0vw\n                    font-size 65vw\n                    color #f0f0f0\n\n                .message\n                    text-align center\n\n                .date\n                    font-size 3vw\n                    color #3a8ee6\n\n\n        .close\n            position absolute\n            right 4vw\n            top 3vw\n            height 10vw\n            width 10vw\n            font-size 12vw\n            color #fff\n\n",{"version":3,"sources":["hall.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoOA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"hall.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <transition name=\"el-zoom-in-top\">\r\n\r\n        <div id=\"hall\">\r\n            <!--            成员内容-->\r\n            <div class=\"main\">\r\n                <div class=\"users\" ref=\"users\" :style=\"{'height':this.$parent.users.length * 18 + 'vw' }\">\r\n                    <div class=\"user\" v-if=\"Object.keys(this.$parent.users).length === 0\">\r\n                        <el-row>\r\n                            <div class=\"noOne\">\r\n                                当前没有人在线，快召唤你的小伙伴！\r\n                            </div>\r\n                        </el-row>\r\n                    </div>\r\n                    <ul>\r\n                        <li class=\"user\" :key=\"index\" v-for=\"(user,index) in this.$parent.users\"\r\n                            :class=\"user.sex ==='女'? 'woman':'man'\">\r\n                            <el-row>\r\n                                <el-col>\r\n                                    <el-image class=\"avatar\" fit=\"cover\" :src=\"user.avatar\"></el-image>\r\n                                </el-col>\r\n\r\n                                <el-col :offset=\"6\" :span=6>\r\n                                    <span class=\"name\">{{user.name}}</span>\r\n                                </el-col>\r\n                                <el-col :span=1 v-show=\"user.sex\">\r\n                                    <div class=\"sex iconfont\"\r\n                                         :class=\"user.sex ==='女'? 'icon-lunkuodasan-':'icon-lunkuodasan-1'\"\r\n                                         :style=\"{'color': user.sex==='女'?color[0]:color[1]}\"></div>\r\n                                </el-col>\r\n                                <div class=\"btn\">\r\n                                    <el-button class=\"el-icon-place\" @click=\"playGame\"></el-button>\r\n                                    <el-button class=\"el-icon-chat-round\"\r\n                                               @click=\"displayChat('',user.name,user.avatar)\">\r\n                                        <el-badge v-show=\"privateUnread.includes(user.name)\" is-dot></el-badge>\r\n                                    </el-button>\r\n                                </div>\r\n                            </el-row>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div class=\"chatBtn\" :style=\"{'opacity': Iconshow ? '1':'0.4'}\">\r\n                    <el-row>\r\n                        <el-badge :value=\"commitBtnBadge\" :max=\"9\" class=\"item\">\r\n                            <el-button @click=\"displayChat\" class=\"begin el-icon-s-comment\" circle></el-button>\r\n                        </el-badge>\r\n                    </el-row>\r\n                </div>\r\n            </div>\r\n\r\n            <!--            广播和私聊信息-->\r\n            <transition name=\"el-zoom-in-bottom\">\r\n                <div class=\"MessageInput\" v-show=\"MessageInputDisplay\">\r\n                    <div v-show=\"privateChating\">\r\n                        <el-row>\r\n                            <el-col>\r\n                                <el-image class=\"privateAvatar\" fit=\"cover\" :src=\"privatePeople.avatar\"></el-image>\r\n                            </el-col>\r\n                        </el-row>\r\n                    </div>\r\n                    <div class=\"messages\" ref=\"messages\">\r\n                        <ul>\r\n                            <li class=\"content\" :key=\"item\"\r\n                                v-for=\"(message,item) in privateChating?privateChat[privatePeople.name]:MessageContent\">\r\n                                <el-row>\r\n                                    <el-col :span=\"6\">\r\n                                        <el-image class=\"avatar\" fit=\"cover\" :src=\"message.avatar\"></el-image>\r\n                                        <el-col class=\"name\">{{message.name}}</el-col>\r\n                                    </el-col>\r\n                                    <!--                                    <el-col class=\"message\" :span=\"14\"></el-col>-->\r\n                                    <el-col class=\"message\" :span=\"14\"><span\r\n                                            class=\"message\">{{message.message}}</span><i\r\n                                            class=\"iconfont icon-qipao chatBackground\"></i></el-col>\r\n                                    <el-col class=\"date\" :span=\"3\">{{message.date}}</el-col>\r\n                                </el-row>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                    <div class=\"input\">\r\n                        <el-row>\r\n                            <el-col :span=\"20\">\r\n                                <el-input clearable placeholder=\"随便说点什么\" v-model=\"inputMessage\"></el-input>\r\n                            </el-col>\r\n                            <el-col :span=\"4\">\r\n                                <el-button @click=\"SendMessage\" :type=\"inputBtnType\">发送</el-button>\r\n                            </el-col>\r\n                        </el-row>\r\n                    </div>\r\n                    <div class=\"close\" @click=\"closeMessage\">\r\n                        <i class=\"el-icon-error\"></i>\r\n                    </div>\r\n                </div>\r\n            </transition>\r\n        </div>\r\n    </transition>\r\n</template>\r\n\r\n<script>\r\n    import BScroll from 'better-scroll'\r\n\r\n    export default {\r\n        name: \"hall\",\r\n\r\n        data() {\r\n            return {\r\n                Iconshow: false,   //chat按钮隐藏\r\n                color: ['#ff709d', '#7fe6f5'],  //性别颜色\r\n                inputMessage: '',\r\n                inputBtnType: 'info',\r\n                MessageInputDisplay: true,\r\n                messagesScroll: null,\r\n                usersScroll: null,\r\n                commitBtnBadge: 0,\r\n                privateChat: {},  //私聊内容\r\n                privateChatBuffer: {},  //私聊内容缓存  解决卡慢的问题\r\n                privateChating: false,  //私聊框隐藏\r\n                privatePeople: {},//私聊成员,\r\n                privateUnread:[] //未读消息\r\n            }\r\n        },\r\n        props: ['MessageContent', 'privateChatContent'],\r\n        mounted() {\r\n            //允许滑动\r\n            this.usersScroll = new BScroll(this.$refs.users, {\r\n                click: true,\r\n            })\r\n            this.messagesScroll = new BScroll(this.$refs.messages, {\r\n                click: true,\r\n                scrollbar: true,\r\n                scrollY: true,\r\n                stop: 0,\r\n                startY: -5000,\r\n                mouseWheel: {\r\n                    speed: 20,\r\n                    invert: false,\r\n                    easeTime: 300\r\n                }\r\n            })\r\n            this.MessageInputDisplay = false\r\n        },\r\n        methods: {\r\n            displayChat(event, name, avatar) {   //群聊图标的隐藏显示\r\n                if (name && avatar) {\r\n                    this.privateChating = true  //私聊框显示\r\n                    this.privatePeople = {name, avatar}  //给当前聊天框的对象赋值\r\n                    this.privateUnread.splice(this.privateUnread.indexOf(this.name),1)  //删除未读红点提示\r\n                } else {\r\n                    this.privateChating = false  //私聊框隐藏\r\n                    this.commitBtnBadge = 0  //红点显示数字\r\n                }\r\n                this.Iconshow = true\r\n                setTimeout(() => {\r\n                    this.Iconshow = false\r\n                }, 5000)\r\n                this.MessageInputDisplay = true\r\n            },\r\n            SendMessage() {\r\n                let name = this.$parent.name\r\n                let message = this.inputMessage\r\n                let avatar = this.$parent.avatar\r\n                let date = new Date().getHours() + ':' + new Date().getMinutes()\r\n\r\n                if (name) {\r\n                    if (message) {\r\n                        if (!this.privateChating) {  //发送群聊\r\n                            this.$socket.emit('broadcast', {\r\n                                'name': name,\r\n                                'message': message,\r\n                                'date': date,\r\n                                'avatar': avatar\r\n                            })\r\n                        } else {      //发送私聊\r\n                            let chatTo = this.privatePeople.name\r\n                            this.$socket.emit('privateChat', {\r\n                                'chatFrom': name,\r\n                                'message': message,\r\n                                'date': date,\r\n                                'chatTo': chatTo,\r\n                                'name': name,\r\n                                'avatar': avatar\r\n                            })\r\n                        }\r\n                        this.inputMessage = ''\r\n                    } else {\r\n                        this.$message.info('写点东西再提交把！')\r\n                    }\r\n\r\n                } else {\r\n                    this.$message.info('请补充个人信息')\r\n                }\r\n            },\r\n            closeMessage() {\r\n                this.MessageInputDisplay = false\r\n            },\r\n            playGame() {\r\n                this.$message.info({\r\n                    showClose: true,\r\n                    message: '即将开通，敬请期待'\r\n                });\r\n            }\r\n        },\r\n        watch: {\r\n            inputMessage() {\r\n                this.inputBtnType = 'success'\r\n            },\r\n            MessageContent() {\r\n                this.commitBtnBadge++\r\n                const messagesList = this.$refs.messages.querySelectorAll('ul>li')\r\n                this.messagesScroll.scrollToElement(messagesList[messagesList.length - 1], 100, true, true)\r\n            },\r\n            privateChatContent() {\r\n                let chatFromData = this.privateChatContent\r\n                let chat = chatFromData.chat\r\n                if (this.privateChatBuffer[chat]) {\r\n                    this.privateChatBuffer[chat].push(chatFromData)\r\n\r\n                } else {\r\n                    this.privateChatBuffer[chat] = [chatFromData]\r\n                }\r\n                this.privateUnread.push(chatFromData.name)\r\n                this.privateChat = []   //先把聊天内容清空\r\n                this.privateChat = this.privateChatBuffer\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"stylus\">\r\n    #hall\r\n        .main\r\n            .users\r\n                position relative\r\n                top 24vw\r\n                height 18vw\r\n                z-index 10\r\n\r\n                .user\r\n                    height 18vw\r\n                    width 100%\r\n                    border-bottom #c6c6c6 solid 1px\r\n\r\n                    &.woman\r\n                        background: #ff709d22\r\n\r\n                    &.man\r\n                        background: #3ec8ff 22\r\n\r\n                /* Safari 5.1 - 6.0 */\r\n\r\n                .noOne\r\n                    font-size 4.5vw\r\n                    color #E6A23C\r\n                    line-height 18vw\r\n\r\n                .avatar\r\n                    position absolute\r\n                    top 3vw\r\n                    left 6vw\r\n                    height 10vw\r\n                    width 10vw\r\n                    border-radius 50%\r\n\r\n                .name\r\n                    position absolute\r\n                    top 7.5vw\r\n                    left 22vw\r\n                    font-size 3.6vw\r\n                    color #f0f0f0\r\n\r\n                .sex\r\n                    position absolute\r\n                    top 12vw\r\n                    left 15vw\r\n                    font-size 3vw\r\n                    font-weight bold\r\n\r\n                .btn\r\n                    position absolute\r\n                    top 1vw\r\n                    right 3vw\r\n\r\n                    .el-button\r\n                        margin 0\r\n                        margin-right 3px\r\n                        height 16vw\r\n                        width 18vw\r\n                        background #0000\r\n                        border: 0\r\n                        outline 0\r\n                        color #f0f0f0\r\n                        font-size 6vw\r\n\r\n            .chatBtn\r\n                position fixed\r\n                z-index 10\r\n                bottom 8em\r\n                right 1em\r\n                opacity 0.6\r\n                background #0000\r\n\r\n                .el-button\r\n                    font-size 4vw\r\n\r\n        .MessageInput\r\n            position fixed\r\n            left 0\r\n            bottom 0\r\n            z-index 20\r\n            width 100%\r\n            height 154vw\r\n            background: -webkit-linear-gradient(left top, #0e1531, #16310a); /* Safari 5.1 - 6.0 */\r\n            background: -o-linear-gradient(bottom right, #0e1531, #16310a); /* Opera 11.1 - 12.0 */\r\n            background: -moz-linear-gradient(bottom right, #0e1531, #16310a); /* Firefox 3.6 - 15 */\r\n            background: linear-gradient(to bottom right, #0e1531, #16310a); /* 标准的语法 */\r\n\r\n            .input\r\n                position absolute\r\n                bottom 0\r\n                width 100%\r\n                height 10vw\r\n\r\n            .privateAvatar\r\n                height 145vw\r\n                -webkit-filter: brightness(50%) blur(5px); /* Chrome, Safari, Opera */\r\n                filter: brightness(50%) blur(5px);\r\n\r\n            .messages\r\n                position absolute\r\n                z-index 0\r\n                overflow: hidden;\r\n                bottom 16vw\r\n                top 10vw\r\n                height 135vw\r\n                width 100%\r\n\r\n                .content\r\n                    margin-top 6vw\r\n                    margin-bottom 4vw\r\n                    height 16vw\r\n                    width 100%\r\n                    line-height 16vw\r\n                    font-size 4.5vw\r\n                    color #152e31\r\n\r\n                    .name\r\n                        position relative\r\n                        color #fff\r\n                        left 8vw\r\n                        top -3vw\r\n                        font-size 4vw\r\n                        overflow hidden\r\n\r\n                    .avatar\r\n                        position absolute\r\n                        left 2vw\r\n                        top 2vw\r\n                        height 12vw\r\n                        width 12vw\r\n                        border-radius 50%\r\n\r\n                    .chatBackground\r\n                        position absolute\r\n                        z-index -10\r\n                        left 22vw\r\n                        top 0vw\r\n                        font-size 65vw\r\n                        color #f0f0f0\r\n\r\n                    .message\r\n                        text-align center\r\n\r\n                    .date\r\n                        font-size 3vw\r\n                        color #3a8ee6\r\n\r\n\r\n            .close\r\n                position absolute\r\n                right 4vw\r\n                top 3vw\r\n                height 10vw\r\n                width 10vw\r\n                font-size 12vw\r\n                color #fff\r\n\r\n</style>\r\n"]}]}