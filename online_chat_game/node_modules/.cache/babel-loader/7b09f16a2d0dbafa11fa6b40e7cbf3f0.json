{"remainingRequest":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\src\\components\\personalInfor.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\src\\components\\personalInfor.vue","mtime":1569560586570},{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\王有赫\\Documents\\my files\\vue\\CGOL\\online_chat_game\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"personalInfor\",\n  data: function data() {\n    return {\n      sexRadio: '',\n      name: '',\n      avatar: '',\n      avatarImg: 'img/default_avatar/avatar.jpg',\n      avatarAction: 'http://localhost:8888/uploadImg'\n    };\n  },\n  mounted: function mounted() {\n    this.name = this.$parent.name; //把个人信息填充进来\n\n    this.sexRadio = this.$parent.sex;\n    this.avatarImg = this.$parent.avatar || 'img/default_avatar/avatar.jpg';\n  },\n  methods: {\n    handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n      this.imageUrl = URL.createObjectURL(file.raw);\n      this.avatarImg = this.imageUrl;\n      this.avatar = res;\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var ImgType = ['image/jpeg', 'image/png', ' image/jpg'];\n      var isImg = ImgType.includes(file.type);\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isImg) {\n        this.$message.error('上传头像图片只能是 jpg/png 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n\n      return isImg && isLt2M;\n    },\n    commit: function commit() {\n      var _this = this;\n\n      var config = {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      var api = this.$parent.api;\n\n      if (this.name === '' || this.sexRadio === '') {\n        this.$message.error('信息不完整');\n      } else {\n        var avatar = this.avatar || 'defaultAvatar.jpg';\n        var name = this.name;\n        var sex = this.sexRadio;\n        var user = this.$parent.user;\n\n        if (name && sex && user) {\n          var Data = {\n            'avatar': avatar,\n            'name': name,\n            'sex': sex,\n            'user': user\n          };\n          this.axios.post(api + 'uploadForm', Data, config).then(function (response) {\n            if (response.data === 'success') {\n              _this.$message({\n                message: '修改成功',\n                type: 'success',\n                duration: 1000\n              });\n            }\n          });\n          this.axios.post(api + 'updataInfo', {\n            user: user\n          }).then(function (response) {\n            if (response.data) {\n              var _response$data = response.data,\n                  _name = _response$data.name,\n                  _sex = _response$data.sex,\n                  _avatar = _response$data.avatar;\n              _this.$parent.name = _name;\n              _this.$parent.sex = _sex;\n              _this.$parent.avatar = _avatar;\n\n              _this.$socket.emit('user', {\n                'user': _this.$parent.user,\n                'name': _name,\n                'id': _this.$parent.websocketid,\n                'sex': _sex,\n                'avatar': _avatar\n              });\n            }\n          });\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["personalInfor.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <transition name=\"el-zoom-in-top\">\r\n\r\n        <div id=\"personalInfor\">\r\n\r\n            <div class=\"avatar\">\r\n                <el-upload\r\n                        class=\"avatar-uploader\"\r\n                        :action=\"avatarAction\"\r\n                        :show-file-list=\"false\"\r\n                        :on-success=\"handleAvatarSuccess\"\r\n                        :before-upload=\"beforeAvatarUpload\">\r\n                    <el-image  shape=\"square\" style=\"width: 100px; height: 100px\" :src=\"avatarImg\" fit=\"scale-down\"></el-image>\r\n                </el-upload>\r\n            </div>\r\n            <el-form>\r\n                <div class=\"main\">\r\n                    <div class=\"edit\">\r\n                        <el-row>\r\n                            <el-col :offset=\"4\" :span=\"3\"><span class=\"text\">昵称</span></el-col>\r\n                            <el-col :span=\"10\" class=\"name\">\r\n                                <el-form-item>\r\n                                    <el-input class=\"myInput\" v-model=\"name\"></el-input>\r\n                                </el-form-item>\r\n                            </el-col>\r\n                        </el-row>\r\n                    </div>\r\n                    <div class=\"edit\">\r\n                        <el-row>\r\n                            <el-col :offset=\"4\" :span=\"3\"><span class=\"text\">性别</span></el-col>\r\n                            <el-col :span=\"10\">\r\n                                <el-form-item>\r\n\r\n                                    <el-radio-group v-model=\"sexRadio\">\r\n                                        <el-radio-button label=\"男\"></el-radio-button>\r\n                                        <el-radio-button label=\"女\"></el-radio-button>\r\n                                    </el-radio-group>\r\n                                </el-form-item>\r\n                            </el-col>\r\n                        </el-row>\r\n                    </div>\r\n                </div>\r\n                <el-row class=\"commit\">\r\n                    <el-col>\r\n                        <el-form-item>\r\n                            <el-button type=\"success\" @click=\"commit\" :span=\"12\" icon=\"el-icon-thumb\" round>提交\r\n                            </el-button>\r\n\r\n                        </el-form-item>\r\n                    </el-col>\r\n                </el-row>\r\n            </el-form>\r\n        </div>\r\n\r\n    </transition>\r\n\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"personalInfor\",\r\n        data() {\r\n            return {\r\n                sexRadio: '',\r\n                name: '',\r\n                avatar: '',\r\n                avatarImg:'img/default_avatar/avatar.jpg',\r\n                avatarAction:'http://localhost:8888/uploadImg'\r\n            };\r\n        },\r\n        mounted() {\r\n            this.name = this.$parent.name //把个人信息填充进来\r\n            this.sexRadio = this.$parent.sex\r\n            this.avatarImg = this.$parent.avatar || 'img/default_avatar/avatar.jpg'\r\n        },\r\n        methods: {\r\n            handleAvatarSuccess(res, file) {\r\n                this.imageUrl = URL.createObjectURL(file.raw);\r\n                this.avatarImg = this.imageUrl\r\n                this.avatar = res\r\n            },\r\n            beforeAvatarUpload(file) {\r\n                const ImgType = ['image/jpeg', 'image/png', ' image/jpg'];\r\n                let isImg = ImgType.includes(file.type);\r\n                const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n                if (!isImg) {\r\n                    this.$message.error('上传头像图片只能是 jpg/png 格式!');\r\n                }\r\n                if (!isLt2M) {\r\n                    this.$message.error('上传头像图片大小不能超过 2MB!');\r\n                }\r\n                return isImg && isLt2M;\r\n            },\r\n            commit() {\r\n                const config = {\r\n                    headers: {'Content-Type': 'application/json'}\r\n                }\r\n                const api = this.$parent.api\r\n                if (this.name === '' || this.sexRadio === '') {\r\n                    this.$message.error('信息不完整');\r\n                } else {\r\n                    const avatar = this.avatar||'defaultAvatar.jpg'\r\n                    const name = this.name;\r\n                    const sex = this.sexRadio;\r\n                    const user = this.$parent.user;\r\n                    if (name && sex && user) {\r\n                        let Data = {\r\n                            'avatar': avatar,\r\n                            'name': name,\r\n                            'sex': sex,\r\n                            'user': user\r\n                        };\r\n                        this.axios.post(api + 'uploadForm', Data, config).then(response => {\r\n                            if (response.data === 'success') {\r\n                                this.$message({\r\n                                    message: '修改成功',\r\n                                    type: 'success',\r\n                                    duration: 1000\r\n                                })\r\n                            }\r\n                        })\r\n                        this.axios.post(api + 'updataInfo', {user: user}).then(response => {\r\n                            if (response.data) {\r\n                                let {name, sex, avatar} = response.data\r\n                                this.$parent.name = name\r\n                                this.$parent.sex = sex\r\n                                this.$parent.avatar = avatar\r\n                                this.$socket.emit('user', {'user':this.$parent.user,'name': name,'id':this.$parent.websocketid,\r\n                                    'sex':sex,'avatar':avatar})\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n    #personalInfor\r\n        .avatar\r\n            margin-top 35vw\r\n\r\n            .avatar-uploader .el-upload {\r\n                border: 1px dashed #efefef88;\r\n                border-radius: 6px;\r\n                cursor: pointer;\r\n                position: relative;\r\n                overflow: hidden;\r\n            }\r\n\r\n            .avatar-uploader .el-upload:hover {\r\n                border-color: #c6c6c6;\r\n            }\r\n\r\n            .avatar-uploader-icon {\r\n                font-size: 28px;\r\n                color: #8c939d;\r\n                width: 178px;\r\n                height: 178px;\r\n                line-height: 178px;\r\n                text-align: center;\r\n            }\r\n\r\n            .avatar {\r\n                width: 178px;\r\n                height: 178px;\r\n                display: block;\r\n            }\r\n\r\n        .main\r\n            .edit\r\n                margin-top 40px\r\n\r\n                .text\r\n                    color #ececec\r\n                    height: 50px\r\n                    line-height: 50px\r\n                    font-size: 17px\r\n\r\n                .el-input__inner\r\n                    background-color: #fff0\r\n                    border 0\r\n                    border-bottom 1px solid rgba(71, 97, 110, 0.72)\r\n                    border-radius 0\r\n                    display: inline-block\r\n                    padding-left 5px\r\n                    font-size: 17px\r\n                    height: 40px\r\n                    line-height: 40px\r\n                    width: 70%\r\n                    color #ececec\r\n\r\n                .el-radio-button__inner\r\n                    background-color: #fff8\r\n                    border 0\r\n                    outline 0\r\n\r\n        .commit\r\n            margin-top 3em\r\n</style>\r\n"],"sourceRoot":"src/components"}]}